/*!
 * Accessible Datepicker v1.0.0 
 * Copyright 2015 Eureka2, Jacques Archim√®de.
 * Based on the example of the Open AJAX Alliance Accessibility Tools Task Force : http://www.oaa-accessibility.org/examplep/datepicker1/
 * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
 * Inspired by :
 * http://wet-boew.github.io/wet-boew/demos/datepicker/datepicker-fr.html
 * http://eternicode.github.io/bootstrap-datepicker
 */
if(typeof jQuery=="undefined")throw new Error("Datepicker's JavaScript requires jQuery");(function(){"use strict";typeof Date.dp_locales=="undefined"&&(Date.dp_locales={texts:{buttonTitle:"Select date ...",buttonLabel:"Click or press the Enter key or the spacebar to open the calendar",prevButtonLabel:"Go to previous month",prevMonthButtonLabel:"Go to the previous year",prevYearButtonLabel:"Go to the previous twenty years",nextButtonLabel:"Go to next month",nextMonthButtonLabel:"Go to the next year",nextYearButtonLabel:"Go to the next twenty years",changeMonthButtonLabel:"Click or press the Enter key or the spacebar to change the month",changeYearButtonLabel:"Click or press the Enter key or the spacebar to change the year",changeRangeButtonLabel:"Click or press the Enter key or the spacebar to go to the next twenty years",closeButtonTitle:"Close",closeButtonLabel:"Close the calendar",calendarHelp:"- Up Arrow and Down Arrow - goes to the same day of the week in the previous or next week respectively. If the end of the month is reached, continues into the next or previous month as appropriate.\r\n- Left Arrow and Right Arrow - advances one day to the next, also in a continuum. Visually focus is moved from day to day and wraps from row to row in the grid of days.\r\n- Control+Page Up - Moves to the same date in the previous year.\r\n- Control+Page Down - Moves to the same date in the next year.\r\n- Home - Moves to the first day of the current month.\r\n- End - Moves to the last day of the current month.\r\n- Page Up - Moves to the same date in the previous month.\r\n- Page Down - Moves to the same date in the next month.\r\n- Enter or Espace - closes the calendar, and the selected date is shown in the associated text box.\r\n- Escape - closes the calendar without any action."},month_names:["January","February","March","April","May","June","July","August","September","October","November","December"],month_names_abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],month_names_narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],day_names:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],day_names_abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],day_names_short:["Su","Mo","Tu","We","Th","Fr","Sa"],day_names_narrow:["S","M","T","W","T","F","S"],day_periods:{am:"AM",noon:"noon",pm:"PM"},day_periods_abbreviated:{am:"AM",noon:"noon",pm:"PM"},day_periods_narrow:{am:"a",noon:"n",pm:"p"},quarter_names:["1st quarter","2nd quarter","3rd quarter","4th quarter"],quarter_names_abbreviated:["Q1","Q2","Q3","Q4"],quarter_names_narrow:["1","2","3","4"],era_names:["Before Christ","Anno Domini"],era_names_abbreviated:["BC","AD"],era_names_narrow:["B","A"],full_format:"EEEE, MMMM d, y",long_format:"MMMM d, y",medium_format:"MMM d, y",short_format:"M/d/yy",firstday_of_week:0})})();+function(n){"use strict";var r=['<a class="datepicker-button input-group-addon" role="button" aria-haspopup="true" tabindex="0" aria-labelledby="datepicker-bn-open-label-CALENDARID">','\t<span class="glyphicon glyphicon-calendar" title="Select Date..."><\/span>',"<\/a>"],u=['<div class="datepicker-calendar" id="datepicker-calendar-CALENDARID" aria-hidden="false">','\t<div class="datepicker-month-wrap">','\t\t<div class="datepicker-month-fast-next pull-right" role="button" aria-labelledby="datepicker-bn-fast-next-label-CALENDARID" tabindex="0"><span class="glyphicon glyphicon-forward"><\/span><\/div>','\t\t<div class="datepicker-month-next pull-right" role="button" aria-labelledby="datepicker-bn-next-label-CALENDARID" tabindex="0"><span class="glyphicon glyphicon-triangle-right"><\/span><\/div>','\t\t<div class="datepicker-month-fast-prev pull-left" role="button" aria-labelledby="datepicker-bn-fast-prev-label-CALENDARID" tabindex="0"><span class="glyphicon glyphicon-backward"><\/span><\/div>','\t\t<div class="datepicker-month-prev pull-left" role="button" aria-labelledby="datepicker-bn-prev-label-CALENDARID" tabindex="0"><span class="glyphicon glyphicon-triangle-left"><\/span><\/div>','\t\t<div id="datepicker-month-CALENDARID" class="datepicker-month" tabindex="0" role="heading" aria-live="assertive" aria-atomic="true" title="Click or press the Enter key or the spacebar to change the month">July 2015<\/div>',"\t<\/div>",'\t<table class="datepicker-grid" role="grid" aria-readonly="true" aria-activedescendant="datepicker-err-msg-CALENDARID" aria-labelledby="datepicker-month-CALENDARID" tabindex="0">',"\t\t<thead>",'\t\t\t<tr class="datepicker-weekdays" role="row">','\t\t\t\t<th class="datepicker-day" role="columnheader"><abbr title="Sunday">Su<\/abbr><\/th>','\t\t\t\t<th class="datepicker-day" role="columnheader"><abbr title="Monday">Mo<\/abbr><\/th>','\t\t\t\t<th class="datepicker-day" role="columnheader"><abbr title="Tuesday">Tu<\/abbr><\/th>','\t\t\t\t<th class="datepicker-day" role="columnheader"><abbr title="Wednesday">We<\/abbr><\/th>','\t\t\t\t<th class="datepicker-day" role="columnheader"><abbr title="Thursday">Th<\/abbr><\/th>','\t\t\t\t<th class="datepicker-day" role="columnheader"><abbr title="Friday">Fr<\/abbr><\/th>','\t\t\t\t<th class="datepicker-day" role="columnheader"><abbr title="Saturday">Sa<\/abbr><\/th>',"\t\t\t<\/tr>","\t\t<\/thead>","\t\t<tbody>","\t\t\t<tr>",'\t\t\t\t<td id="datepicker-err-msg-CALENDARID" colspan="7">Javascript must be enabled<\/td>',"\t\t\t<\/tr>","\t\t<\/tbody>","\t<\/table>",'\t<div class="datepicker-close-wrap">','\t\t<button class="datepicker-close" id="datepicker-close-CALENDARID" aria-labelledby="datepicker-bn-close-label-CALENDARID">Close<\/button>',"\t<\/div>",'\t<div id="datepicker-bn-open-label-CALENDARID" class="datepicker-bn-open-label offscreen">Click or press the Enter key or the spacebar to open the calendar<\/div>','\t<div id="datepicker-bn-prev-label-CALENDARID" class="datepicker-bn-prev-label offscreen">Go to previous month<\/div>','\t<div id="datepicker-bn-next-label-CALENDARID" class="datepicker-bn-next-label offscreen">Go to next month<\/div>','\t<div id="datepicker-bn-fast-prev-label-CALENDARID" class="datepicker-bn-fast-prev-label offscreen">Go to previous year<\/div>','\t<div id="datepicker-bn-fast-next-label-CALENDARID" class="datepicker-bn-fast-next-label offscreen">Go to next year<\/div>','\t<div id="datepicker-bn-close-label-CALENDARID" class="datepicker-bn-close-label offscreen">Close the date picker<\/div>',"<\/div>"],t=function(i,f){var e=this,s,h,l,o,c;for(this.$target=n(i),this.options=n.extend({},t.DEFAULTS,f),this.locales=Date.dp_locales,this.id=this.$target.attr("id")||"datepicker-"+Math.floor(Math.random()*1e5),s=u.join(""),s=s.replace(/CALENDARID/g,this.id+""),this.$target.parent(".input-group").length==0&&this.$target.wrap('<div class="input-group"><\/div>'),this.$label=this.$target.parents().find("label[for="+this.id+"]"),this.$group=this.$target.parent(".input-group"),this.$target.attr("aria-autocomplete","none"),this.$target.css("min-width","7em"),this.$target.addClass("form-control"),this.$target.attr("placeholder")||this.$target.attr("placeholder",this.options.inputFormat),h=r.join(""),h=h.replace(/CALENDARID/g,this.id+""),this.$button=n(h),this.$button.addClass(this.options.theme),this.$calendar=n(s),this.$calendar.addClass(this.options.theme),this.$target.after(this.$button),this.$target.parent().after(this.$calendar),this.$calendar.parent().css("position")==="static"&&this.$calendar.parent().css("position","relative"),this.$calendar.find(".datepicker-bn-open-label").html(this.options.buttonLabel),this.$target.attr("id")&&this.$calendar.attr("aria-controls",this.$target.attr("id")),this.$button.find("span").attr("title",this.options.buttonTitle),this.$calendar.css("left",this.$target.parent().position().left+"px"),this.$monthObj=this.$calendar.find(".datepicker-month"),this.$prev=this.$calendar.find(".datepicker-month-prev"),this.$next=this.$calendar.find(".datepicker-month-next"),this.$fastprev=this.$calendar.find(".datepicker-month-fast-prev"),this.$fastnext=this.$calendar.find(".datepicker-month-fast-next"),this.$grid=this.$calendar.find(".datepicker-grid"),l=this.$grid.find("th.datepicker-day abbr"),o=this.options.firstDayOfWeek,c=0;c<7;c++)l.eq(c).attr("title",this.locales.day_names[o]).text(this.options.weekDayFormat==="short"?this.locales.day_names_short[o]:this.locales.day_names_narrow[o]),o=(o+1)%7;this.options.modal==!0?(this.$close=this.$calendar.find(".datepicker-close"),this.$close.html(this.options.closeButtonTitle).attr("title",this.options.closeButtonLabel),this.$calendar.find(".datepicker-bn-close-label").html(this.options.closeButtonLabel)):(this.$calendar.find(".datepicker-close-wrap").remove(),this.$calendar.find(".datepicker-bn-close-label").remove());this.keys={tab:9,enter:13,esc:27,space:32,pageup:33,pagedown:34,end:35,home:36,left:37,up:38,right:39,down:40};this.bindHandlers();this.$calendar.attr("aria-hidden","true");this.$calendar.hide();this.$button.click(function(t){return e.$calendar.attr("aria-hidden")==="true"?(e.initializeDate(),n(".datepicker-calendar").trigger("adp.datepicker.opening",[e.id]),e.show(),n(".datepicker-calendar").trigger("adp.datepicker.opened",[e.id])):e.hide(),t.stopPropagation(),!1});this.$button.keydown(function(t){var i=t||event;if(i.keyCode==e.keys.enter||i.keyCode==e.keys.space)return n(this).trigger("click"),!1});this.$calendar.on("blur",function(){e.$calendar.attr("aria-hidden")==="false"&&e.hide()})},i;t.VERSION="1.0.0";t.DEFAULTS={firstDayOfWeek:Date.dp_locales.firstday_of_week,weekDayFormat:"short",inputFormat:Date.dp_locales.short_format,outputFormat:Date.dp_locales.short_format,titleFormat:Date.dp_locales.full_format,buttonTitle:Date.dp_locales.texts.buttonTitle,buttonLabel:Date.dp_locales.texts.buttonLabel,prevButtonLabel:Date.dp_locales.texts.prevButtonLabel,prevMonthButtonLabel:Date.dp_locales.texts.prevMonthButtonLabel,prevYearButtonLabel:Date.dp_locales.texts.prevYearButtonLabel,nextButtonLabel:Date.dp_locales.texts.nextButtonLabel,nextMonthButtonLabel:Date.dp_locales.texts.nextMonthButtonLabel,nextYearButtonLabel:Date.dp_locales.texts.nextYearButtonLabel,changeMonthButtonLabel:Date.dp_locales.texts.changeMonthButtonLabel,changeYearButtonLabel:Date.dp_locales.texts.changeYearButtonLabel,changeRangeButtonLabel:Date.dp_locales.texts.changeRangeButtonLabel,closeButtonTitle:Date.dp_locales.texts.closeButtonTitle,closeButtonLabel:Date.dp_locales.texts.closeButtonLabel,theme:"default",modal:!1};t.prototype.initializeDate=function(){var n=this.$target.val();this.dateObj=n===""?new Date:this.createDateFromFormat(this.options.inputFormat,n);this.dateObj==null&&(this.$target.attr("aria-invalid",!0),this.$target.parents(".form-group").addClass("has-error"),this.dateObj=new Date);this.curYear=this.dateObj.getFullYear();this.year=this.curYear;this.curMonth=this.dateObj.getMonth();this.month=this.curMonth;this.date=this.dateObj.getDate();this.populateDaysCalendar();this.$grid.attr("aria-activedescendant",this.$grid.find(".curDay").attr("id"))};t.prototype.populateDaysCalendar=function(){var t,i,o,s,f;this.$calendar.find(".datepicker-bn-prev-label").html(this.options.prevButtonLabel);this.$calendar.find(".datepicker-bn-next-label").html(this.options.nextButtonLabel);this.$calendar.find(".datepicker-bn-fast-prev-label").html(this.options.prevMonthButtonLabel);this.$calendar.find(".datepicker-bn-fast-next-label").html(this.options.nextMonthButtonLabel);this.$fastprev.attr("title",this.options.prevMonthButtonLabel);this.$prev.attr("title",this.options.prevButtonLabel);this.$monthObj.attr("title",this.options.changeMonthButtonLabel);this.$next.attr("title",this.options.nextButtonLabel);this.$fastnext.attr("title",this.options.nextMonthButtonLabel);this.$fastprev.show();this.$fastnext.show();var r=this.getDaysInMonth(this.year,this.month),h=new Date(this.year,this.month,1).getDay(),e=(this.options.firstDayOfWeek+6)%7,n=1,u=1;for(this.$monthObj.html(this.locales.month_names[this.month]+" "+this.year),this.$grid.find("thead").show(),t='\t<tr id="row0-'+this.id+'" role="row">\n',i=this.options.firstDayOfWeek;i!=h;)t+='\t\t<td class="empty">&nbsp;<\/td>\n',i=(i+1)%7;for(n=1;n<=r;n++)o=new Date(this.year,this.month,n),s=this.formatDate(o,this.options.titleFormat),t+=n==this.date&&this.month==this.curMonth&&this.year==this.curYear?'\t\t<td id="cell'+n+"-"+this.id+'" class="day curDay"':'\t\t<td id="cell'+n+"-"+this.id+'" class="day"',t+=' data-value="'+n+'"',t+=' title="'+s+'"',t+=' headers="row'+u+"-"+this.id+" "+this.locales.day_names[i]+'" role="gridcell" aria-selected="false">'+n,t+="<\/td>",i==e&&n<r&&(t+='\t<\/tr>\n\t<tr id="row'+u+"-"+this.id+'" role="row">\n',u++),n<r&&(i=(i+1)%7);while(i!=e)t+='\t\t<td class="empty">&nbsp;<\/td>\n',i=(i+1)%7;t+="\t<\/tr>";f=this.$grid.find("tbody");f.empty();f.append(t);this.gridType=0};t.prototype.populateMonthsCalendar=function(){var i;this.$calendar.find(".datepicker-bn-prev-label").html(this.options.prevMonthButtonLabel);this.$calendar.find(".datepicker-bn-next-label").html(this.options.nextMonthButtonLabel);this.$fastprev.hide();this.$fastnext.hide();this.$prev.attr("title",this.options.prevMonthButtonLabel);this.$monthObj.attr("title",this.options.changeYearButtonLabel);this.$next.attr("title",this.options.nextMonthButtonLabel);var t=0,r=1,u=this.$grid.find("tbody");for(this.$monthObj.html(this.year),this.$grid.find("thead").hide(),u.empty(),n("#datepicker-err-msg-"+this.id).empty(),i='\t<tr id="row0-'+this.id+'" role="row">\n',t=0;t<12;t++)i+=t==this.month&&this.year==this.curYear?'\t\t<td id="cell'+(t+1)+"-"+this.id+'" class="month curMonth"':'\t\t<td id="cell'+(t+1)+"-"+this.id+'" class="month"',i+=' data-value="'+t+'"',i+=' title="'+this.locales.month_names[t]+" "+this.year+'"',i+=' role="gridcell" aria-selected="false">'+this.locales.month_names_abbreviated[t],i+="<\/td>",(t==3||t==7)&&(i+='\t<\/tr>\n\t<tr id="row'+r+"-"+this.id+'" role="row">\n',r++);i+="\t<\/tr>";u.append(i);this.gridType=1};t.prototype.populateYearsCalendar=function(){var i,t,u;this.$calendar.find(".datepicker-bn-prev-label").html(this.options.prevYearButtonLabel);this.$calendar.find(".datepicker-bn-next-label").html(this.options.nextYearButtonLabel);this.$fastprev.hide();this.$fastnext.hide();this.$prev.attr("title",this.options.prevYearButtonLabel);this.$monthObj.attr("title",this.options.changeRangeButtonLabel);this.$next.attr("title",this.options.nextYearButtonLabel);var r=Math.floor(this.year/10)*10,f=r+19,e=1,o=this.$grid.find("tbody");for(this.$monthObj.html(r+"-"+f),this.$grid.find("thead").hide(),o.empty(),n("#datepicker-err-msg-"+this.id).empty(),i='\t<tr id="row0-'+this.id+'" role="row">\n',t=r;t<=f;t++)i+=t==this.year?'\t\t<td id="cell'+(t-r+1)+"-"+this.id+'" class="year curYear"':'\t\t<td id="cell'+(t-r+1)+"-"+this.id+'" class="year"',i+=' data-value="'+t+'"',i+=' title="'+t+'"',i+=' role="gridcell" aria-selected="false">'+t,i+="<\/td>",u=t-r,(u==4||u==9||u==14)&&(i+='\t<\/tr>\n\t<tr id="row'+e+"-"+this.id+'" role="row">\n',e++);i+="\t<\/tr>";o.append(i);this.gridType=2};t.prototype.getDaysInMonth=function(n,t){return 32-new Date(n,t,32).getDate()};t.prototype.showDaysOfPrevMonth=function(t){if(this.month==0?(this.month=11,this.year--):this.month--,this.populateDaysCalendar(),t!=null){var r=this.getDaysInMonth(this.year,this.month),i="cell"+(r-t)+"-"+this.id;this.$grid.attr("aria-activedescendant",i);n("#"+i).addClass("focus").attr("aria-selected","true")}};t.prototype.showDaysOfMonth=function(n){this.month=n;this.date=Math.min(this.date,this.getDaysInMonth(this.year,this.month));this.populateDaysCalendar();var t=this.$grid.find("tbody td[data-value='"+this.date+"']");t.addClass("focus").attr("aria-selected","true");this.$grid.attr("aria-activedescendant",t.attr("id"))};t.prototype.showMonthsOfPrevYear=function(t){if(this.year--,this.populateMonthsCalendar(),t!=null){var i="cell"+(12-t)+"-"+this.id;this.$grid.attr("aria-activedescendant",i);n("#"+i).addClass("focus").attr("aria-selected","true")}};t.prototype.showMonthsOfYear=function(n){this.year=n;this.populateMonthsCalendar();var t=this.$grid.find("tbody td[data-value='"+this.month+"']");t.addClass("focus").attr("aria-selected","true");this.$grid.attr("aria-activedescendant",t.attr("id"))};t.prototype.showYearsOfPrevRange=function(t){if(this.year-=20,this.populateYearsCalendar(),t!=null){var i="cell"+(20-t)+"-"+this.id;this.$grid.attr("aria-activedescendant",i);n("#"+i).addClass("focus").attr("aria-selected","true")}};t.prototype.showDaysOfNextMonth=function(t){if(this.month==11?(this.month=0,this.year++):this.month++,this.populateDaysCalendar(),t!=null){var i="cell"+t+"-"+this.id;this.$grid.attr("aria-activedescendant",i);n("#"+i).addClass("focus").attr("aria-selected","true")}};t.prototype.showMonthsOfNextYear=function(t){if(this.year++,this.populateMonthsCalendar(),t!=null){var i="cell"+t+"-"+this.id;this.$grid.attr("aria-activedescendant",i);n("#"+i).addClass("focus").attr("aria-selected","true")}};t.prototype.showYearsOfNextRange=function(t){if(this.year+=20,this.populateYearsCalendar(),t!=null){var i="cell"+t+"-"+this.id;this.$grid.attr("aria-activedescendant",i);n("#"+i).addClass("focus").attr("aria-selected","true")}};t.prototype.showDaysOfPrevYear=function(){this.year--;this.populateDaysCalendar()};t.prototype.showDaysOfNextYear=function(){this.year++;this.populateDaysCalendar()};t.prototype.bindHandlers=function(){var n=this;this.$fastprev.click(function(t){return n.handleFastPrevClick(t)});this.$prev.click(function(t){return n.handlePrevClick(t)});this.$next.click(function(t){return n.handleNextClick(t)});this.$fastnext.click(function(t){return n.handleFastNextClick(t)});this.$monthObj.click(function(t){return n.handleMonthClick(t)});this.$monthObj.keydown(function(t){return n.handleMonthKeyDown(t)});this.$fastprev.keydown(function(t){return n.handleFastPrevKeyDown(t)});this.$prev.keydown(function(t){return n.handlePrevKeyDown(t)});this.$next.keydown(function(t){return n.handleNextKeyDown(t)});this.$fastnext.keydown(function(t){return n.handleFastNextKeyDown(t)});this.options.modal==!0&&(this.$close.click(function(t){return n.handleCloseClick(t)}),this.$close.keydown(function(t){return n.handleCloseKeyDown(t)}));this.$grid.keydown(function(t){return n.handleGridKeyDown(t)});this.$grid.keypress(function(t){return n.handleGridKeyPress(t)});this.$grid.focus(function(t){return n.handleGridFocus(t)});this.$grid.blur(function(t){return n.handleGridBlur(t)});this.$grid.delegate("td","click",function(t){return n.handleGridClick(this,t)})};t.prototype.handleFastPrevClick=function(n){var t=this.$grid.attr("aria-activedescendant");return this.showDaysOfPrevYear(),this.month!=this.curMonth||this.year!=this.curYear?this.$grid.attr("aria-activedescendant","cell1-"+this.id):this.$grid.attr("aria-activedescendant",t),this.$grid.focus(),n.stopPropagation(),!1};t.prototype.handlePrevClick=function(n){var t=this.$grid.attr("aria-activedescendant");switch(this.gridType){case 0:n.ctrlKey?this.showDaysOfPrevYear():this.showDaysOfPrevMonth();this.month!=this.curMonth||this.year!=this.curYear?this.$grid.attr("aria-activedescendant","cell1-"+this.id):this.$grid.attr("aria-activedescendant",t);this.$grid.focus();break;case 1:this.showMonthsOfPrevYear();this.year!=this.curYear?this.$grid.attr("aria-activedescendant","cell1-"+this.id):this.$grid.attr("aria-activedescendant",t);this.$grid.focus();break;case 2:this.showYearsOfPrevRange();this.$grid.attr("aria-activedescendant","cell1-"+this.id);this.$grid.focus()}return n.stopPropagation(),!1};t.prototype.handleMonthClick=function(n){return this.changeGrid(n),this.$grid.focus(),n.stopPropagation(),!1};t.prototype.handleNextClick=function(n){var t=this.$grid.attr("aria-activedescendant");switch(this.gridType){case 0:n.ctrlKey?this.showDaysOfNextYear():this.showDaysOfNextMonth();this.month!=this.curMonth||this.year!=this.curYear?this.$grid.attr("aria-activedescendant","cell1-"+this.id):this.$grid.attr("aria-activedescendant",t);this.$grid.focus();break;case 1:this.showMonthsOfNextYear();this.year!=this.curYear?this.$grid.attr("aria-activedescendant","cell1-"+this.id):this.$grid.attr("aria-activedescendant",t);this.$grid.focus();break;case 2:this.showYearsOfNextRange();this.$grid.attr("aria-activedescendant","cell1-"+this.id);this.$grid.focus()}return n.stopPropagation(),!1};t.prototype.handleFastNextClick=function(n){var t=this.$grid.attr("aria-activedescendant");return this.showDaysOfNextYear(),this.month!=this.curMonth||this.year!=this.curYear?this.$grid.attr("aria-activedescendant","cell1-"+this.id):this.$grid.attr("aria-activedescendant",t),this.$grid.focus(),n.stopPropagation(),!1};t.prototype.handleCloseClick=function(n){return this.hide(),n.stopPropagation(),!1};t.prototype.handleFastPrevKeyDown=function(n){if(n.altKey)return!0;switch(n.keyCode){case this.keys.tab:return this.options.modal==!1||n.ctrlKey?!0:(n.shiftKey?this.$close.focus():this.$prev.focus(),n.stopPropagation(),!1);case this.keys.enter:case this.keys.space:return n.shiftKey||n.ctrlKey?!0:(this.showDaysOfPrevYear(),n.stopPropagation(),!1);case this.keys.esc:return this.hide(),n.stopPropagation(),!1}return!0};t.prototype.handlePrevKeyDown=function(n){if(n.altKey)return!0;switch(n.keyCode){case this.keys.tab:return this.options.modal==!1||n.ctrlKey?!0:(n.shiftKey?this.gridType==0?this.$fastprev.focus():this.$close.focus():this.$monthObj.focus(),n.stopPropagation(),!1);case this.keys.enter:case this.keys.space:if(n.shiftKey)return!0;switch(this.gridType){case 0:n.ctrlKey?this.showDaysOfPrevYear():this.showDaysOfPrevMonth();break;case 1:this.showMonthsOfPrevYear();break;case 2:this.showYearsOfPrevRange()}return n.stopPropagation(),!1;case this.keys.esc:return this.hide(),n.stopPropagation(),!1}return!0};t.prototype.handleMonthKeyDown=function(n){if(n.altKey)return!0;switch(n.keyCode){case this.keys.tab:return this.options.modal==!1||n.ctrlKey?!0:(n.shiftKey?this.$prev.focus():this.$next.focus(),n.stopPropagation(),!1);case this.keys.enter:case this.keys.space:return this.changeGrid(n),n.stopPropagation(),!1;case this.keys.esc:return this.hide(),n.stopPropagation(),!1}return!0};t.prototype.handleNextKeyDown=function(n){if(n.altKey)return!0;switch(n.keyCode){case this.keys.tab:return this.options.modal==!1||n.ctrlKey?!0:(n.shiftKey?this.$monthObj.focus():this.gridType==0?this.$fastnext.focus():this.$grid.focus(),n.stopPropagation(),!1);case this.keys.enter:case this.keys.space:switch(this.gridType){case 0:n.ctrlKey?this.showDaysOfNextYear():this.showDaysOfNextMonth();break;case 1:this.showMonthsOfNextYear();break;case 2:this.showYearsOfNextRange()}return n.stopPropagation(),!1;case this.keys.esc:return this.hide(),n.stopPropagation(),!1}return!0};t.prototype.handleFastNextKeyDown=function(n){if(n.altKey)return!0;switch(n.keyCode){case this.keys.tab:return this.options.modal==!1||n.ctrlKey?!0:(n.shiftKey?this.$next.focus():this.$grid.focus(),n.stopPropagation(),!1);case this.keys.enter:case this.keys.space:return this.showDaysOfNextYear(),n.stopPropagation(),!1;case this.keys.esc:return this.hide(),n.stopPropagation(),!1}return!0};t.prototype.handleCloseKeyDown=function(n){if(n.altKey)return!0;switch(n.keyCode){case this.keys.tab:return n.ctrlKey?!0:(n.shiftKey?this.$grid.focus():this.gridType==0?this.$fastprev.focus():this.$prev.focus(),n.stopPropagation(),!1);case this.keys.enter:case this.keys.esc:case this.keys.space:return n.shiftKey||n.ctrlKey?!0:(this.hide(),n.stopPropagation(),!1)}return!0};t.prototype.handleGridKeyDown=function(t){var u=n("#"+this.$grid.attr("aria-activedescendant")),r=this.$grid.find("td").not(".empty"),h=this.$grid.find("tbody tr").eq(0).find("td").length,e,i,o,s,c,f;if(t.altKey)return!0;switch(t.keyCode){case this.keys.tab:return this.options.modal==!0?(t.shiftKey?this.gridType==0?this.$fastnext.focus():this.$next.focus():this.$close.focus(),t.stopPropagation(),!1):(this.hide(),this.handleTabOut(t),t.stopPropagation(),!1);case this.keys.enter:case this.keys.space:if(t.ctrlKey)return!0;switch(this.gridType){case 0:this.update();this.hide();break;case 1:this.showDaysOfMonth(parseInt(u.attr("data-value")));break;case 2:this.showMonthsOfYear(parseInt(u.attr("data-value")))}return t.stopPropagation(),!1;case this.keys.esc:return this.hide(),t.stopPropagation(),!1;case this.keys.left:if(t.ctrlKey||t.shiftKey)return!0;if(i=r.index(u)-1,e=null,i>=0)e=r.eq(i),u.removeClass("focus").attr("aria-selected","false"),e.addClass("focus").attr("aria-selected","true"),this.$grid.attr("aria-activedescendant",e.attr("id"));else switch(this.gridType){case 0:this.showDaysOfPrevMonth(0);break;case 1:this.showMonthsOfPrevYear(0);break;case 2:this.showYearsOfPrevRange(0)}return t.stopPropagation(),!1;case this.keys.right:if(t.ctrlKey||t.shiftKey)return!0;if(i=r.index(u)+1,o=null,i<r.length)o=r.eq(i),u.removeClass("focus").attr("aria-selected","false"),o.addClass("focus").attr("aria-selected","true"),this.$grid.attr("aria-activedescendant",o.attr("id"));else switch(this.gridType){case 0:this.showDaysOfNextMonth(1);break;case 1:this.showMonthsOfNextYear(1);break;case 2:this.showYearsOfNextRange(1)}return t.stopPropagation(),!1;case this.keys.up:if(t.ctrlKey||t.shiftKey)return!0;if(i=r.index(u)-h,e=null,i>=0)e=r.eq(i),u.removeClass("focus").attr("aria-selected","false"),e.addClass("focus").attr("aria-selected","true"),this.$grid.attr("aria-activedescendant",e.attr("id"));else{i=h-1-r.index(u);switch(this.gridType){case 0:this.showDaysOfPrevMonth(i);break;case 1:this.showMonthsOfPrevYear(i);break;case 2:this.showYearsOfPrevRange(i)}}return t.stopPropagation(),!1;case this.keys.down:if(t.ctrlKey||t.shiftKey)return!0;if(i=r.index(u)+h,o=null,i<r.length)o=r.eq(i),u.removeClass("focus").attr("aria-selected","false"),o.addClass("focus").attr("aria-selected","true"),this.$grid.attr("aria-activedescendant",o.attr("id"));else{i=h+1-(r.length-r.index(u));switch(this.gridType){case 0:this.showDaysOfNextMonth(i);break;case 1:this.showMonthsOfNextYear(i);break;case 2:this.showYearsOfNextRange(i)}}return t.stopPropagation(),!1;case this.keys.pageup:if(s=this.$grid.attr("aria-activedescendant"),t.shiftKey)return!0;t.preventDefault();switch(this.gridType){case 0:t.ctrlKey?(t.stopImmediatePropagation(),this.showDaysOfPrevYear()):this.showDaysOfPrevMonth();break;case 1:this.showMonthsOfPrevYear();break;case 2:this.showYearsOfPrevRange()}return n("#"+s).attr("id")==undefined?(f="cell"+r.length+"-"+this.id,n("#"+f).addClass("focus").attr("aria-selected","true"),this.$grid.attr("aria-activedescendant",f)):n("#"+s).addClass("focus").attr("aria-selected","true"),t.stopPropagation(),!1;case this.keys.pagedown:if(s=this.$grid.attr("aria-activedescendant"),t.shiftKey)return!0;t.preventDefault();switch(this.gridType){case 0:t.ctrlKey?(t.stopImmediatePropagation(),this.showDaysOfNextYear()):this.showDaysOfNextMonth();break;case 1:this.showMonthsOfNextYear();break;case 2:this.showYearsOfNextRange()}return n("#"+s).attr("id")==undefined?(f="cell"+r.length+"-"+this.id,n("#"+f).addClass("focus").attr("aria-selected","true"),this.$grid.attr("aria-activedescendant",f)):n("#"+s).addClass("focus").attr("aria-selected","true"),t.stopPropagation(),!1;case this.keys.home:return t.ctrlKey||t.shiftKey?!0:(c="cell1-"+this.id,u.removeClass("focus").attr("aria-selected","false"),n("#"+c).addClass("focus").attr("aria-selected","true"),this.$grid.attr("aria-activedescendant",c),t.stopPropagation(),!1);case this.keys.end:return t.ctrlKey||t.shiftKey?!0:(f="cell"+r.length+"-"+this.id,u.removeClass("focus").attr("aria-selected","false"),n("#"+f).addClass("focus").attr("aria-selected","true"),this.$grid.attr("aria-activedescendant",f),t.stopPropagation(),!1)}return!0};t.prototype.handleGridKeyPress=function(n){if(n.altKey)return!0;switch(n.keyCode){case this.keys.tab:case this.keys.enter:case this.keys.space:case this.keys.esc:case this.keys.left:case this.keys.right:case this.keys.up:case this.keys.down:case this.keys.pageup:case this.keys.pagedown:case this.keys.home:case this.keys.end:return n.stopPropagation(),!1}return!0};t.prototype.handleGridClick=function(t,i){var r=n(t);if(r.is(".empty"))return!0;this.$grid.find(".focus").removeClass("focus").attr("aria-selected","false");switch(this.gridType){case 0:r.addClass("focus").attr("aria-selected","true");this.$grid.attr("aria-activedescendant",r.attr("id"));this.update();this.hide();break;case 1:this.showDaysOfMonth(parseInt(r.attr("data-value")));break;case 2:this.showMonthsOfYear(parseInt(r.attr("data-value")))}return i.stopPropagation(),!1};t.prototype.handleGridFocus=function(){var r=this.$grid.find("td").not(".empty"),i=this.$grid.attr("aria-activedescendant"),t;return n("#"+i).attr("id")==undefined?(t="cell"+r.length+"-"+this.id,n("#"+t).addClass("focus").attr("aria-selected","true"),this.$grid.attr("aria-activedescendant",t)):n("#"+i).addClass("focus").attr("aria-selected","true"),!0};t.prototype.handleGridBlur=function(){return n("#"+this.$grid.attr("aria-activedescendant")).removeClass("focus").attr("aria-selected","false"),!0};t.prototype.handleTabOut=function(t){var r=n("body").find("input:visible,textarea:visible,select:visible"),i=r.index(this.$target);return i>-1&&i<r.length&&(t.shiftKey?i>0&&i--:i+1<r.length&&i++,r.eq(i).focus()),!0};t.prototype.changeGrid=function(n){switch(this.gridType){case 0:this.populateMonthsCalendar();this.year!=this.curYear?this.$grid.attr("aria-activedescendant","cell1-"+this.id):this.$grid.attr("aria-activedescendant",this.$grid.find(".curMonth").attr("id"));break;case 2:n.shiftKey?this.year-=20:this.year+=20;case 1:this.populateYearsCalendar();this.year!=this.curYear?this.$grid.attr("aria-activedescendant","cell1-"+this.id):this.$grid.attr("aria-activedescendant",this.$grid.find(".curYear").attr("id"))}};t.prototype.update=function(){var t=n("#"+this.$grid.attr("aria-activedescendant")),i=new Date(this.year,this.month,parseInt(t.attr("data-value")));this.$target.val(this.formatDate(i,this.options.outputFormat));this.$target.removeAttr("aria-invalid");this.$target.parents(".form-group").removeClass("has-error");this.$target.trigger("change")};t.prototype.show=function(){var t=this,i;this.options.modal==!0?(n(document).bind("click mousedown mouseup",function(n){return t.$grid.focus(),n.stopPropagation,!1}),this.greyOut(!0),i=parseInt(n("#datepicker-overlay").css("z-index"))||40,this.$calendar.css("z-index",i+1)):(n(document).bind("click",n.proxy(this.handleDocumentClick,this)),this.$calendar.bind("adp.datepicker.opening",function(n,i){i!=t.id?t.hide():t.$grid.focus()}));this.$calendar.bind("adp.datepicker.opened",function(n,i){i==t.id&&t.$grid.focus()});var r=Math.max(0,Math.floor(this.$group.offset().top-this.$label.offset().top)),u=Math.max(0,Math.floor(this.$group.offset().left-this.$label.offset().left)),f=parseInt(this.$calendar.parent().css("padding-left")),e=this.$calendar.outerHeight(),o=this.$group.offset().top,l=this.$group.offset().left,s=this.$group.outerHeight(!0),c=Math.floor(o-n(window).scrollTop()),h=Math.floor(n(window).height()-(o+s-n(window).scrollTop()));h<e&&h<c?this.$calendar.css({top:r-e+"px",left:u+f+"px"}):this.$calendar.css({top:s+r+"px",left:u+f+"px"});this.$calendar.attr("aria-hidden","false");this.$calendar.show()};t.prototype.handleDocumentClick=function(t){return n(t.target).parents("#datepicker-calendar-"+this.id).length==0?(this.hide(),!0):(this.$grid.focus(),t.stopPropagation,!1)};t.prototype.hide=function(){var t=this;this.options.modal==!0?(n(document).unbind("click mousedown mouseup"),this.greyOut(!1)):(n(document).unbind("click",t.handleDocumentClick),this.$calendar.unbind("adp.datepicker.opening"));this.$calendar.attr("aria-hidden","true");this.$calendar.hide();this.$target.focus()};t.prototype.greyOut=function(t){var i=n("#datepicker-overlay");i.length==0&&t&&(n("body").append('<div id="datepicker-overlay" class="datepicker-overlay"><\/div>'),i=n("#datepicker-overlay"));t?i.fadeIn(500):i.fadeOut(500)};t.prototype.absolutePosition=function(n){var t=0,i=0;if(n.getBoundingClientRect){var f=n.getBoundingClientRect(),r=document.body,u=document.documentElement,e=window.pageYOffset||u.scrollTop||r.scrollTop,o=window.pageXOffset||u.scrollLeft||r.scrollLeft,s=u.clientTop||r.clientTop||0,h=u.clientLeft||r.clientLeft||0;t=Math.round(f.top+e-s);i=Math.round(f.left+o-h)}else while(n)t=t+parseInt(n.offsetTop),i=i+parseInt(n.offsetLeft),n=n.offsetParent;return{top:t,left:i}};t.prototype.formatDate=function(n,t){var u=function(n){return(n<0||n>9?"":"0")+n},p=function(n){return Math.ceil((n.getDate()-1-n.getDay())/7)},w=function(n){var t=new Date(n.getFullYear(),0,1);return Math.ceil(((n-t)/864e5+t.getDay()+1)/7)},b=function(n){var t=new Date(n.getFullYear(),0,0);return Math.floor((n-t)/864e5)},o=function(n){var t=new Date(n.getTime());return t.setHours(0),n-t},h=n.getFullYear()+"",f=n.getMonth()+1,l=n.getDate(),c=b(n),r=n.getDay(),i=n.getHours(),a=n.getMinutes(),v=n.getSeconds(),y=w(n),k=p(n),d=Math.floor(n.getDate()/7)+1,e=Math.ceil((n.getMonth()+1)/3),s=n.getFullYear()<1?0:1,g={y:""+h,yyyy:h,yy:h.substring(2,4),L:f,LL:u(f),LLL:this.locales.month_names_abbreviated[f-1],LLLL:this.locales.month_names[f-1],LLLLL:this.locales.month_names_narrow[f-1],M:f,MM:u(f),MMM:this.locales.month_names_abbreviated[f-1],MMMM:this.locales.month_names[f-1],MMMMM:this.locales.month_names_narrow[f-1],d:l,dd:u(l),D:c,DD:c,DDD:c,A:Math.round(o(n)*Math.pow(10,-2)),AA:Math.round(o(n)*Math.pow(10,-1)),AAA:Math.round(o(n)*Math.pow(10,0)),AAAA:Math.round(o(n)*Math.pow(10,1)),AAAAA:Math.round(o(n)*Math.pow(10,2)),AAAAAA:Math.round(o(n)*Math.pow(10,3)),E:this.locales.day_names_abbreviated[r],EE:this.locales.day_names_abbreviated[r],EEE:this.locales.day_names_abbreviated[r],EEEE:this.locales.day_names[r],EEEEE:this.locales.day_names_narrow[r],EEEEEE:this.locales.day_names_short[r],e:r,ee:r,eee:this.locales.day_names_abbreviated[r],eeee:this.locales.day_names[r],eeeee:this.locales.day_names_narrow[r],eeeeee:this.locales.day_names_short[r],c:r,cc:r,ccc:this.locales.day_names_abbreviated[r],cccc:this.locales.day_names[r],ccccc:this.locales.day_names_narrow[r],cccccc:this.locales.day_names_short[r],F:d,G:this.locales.era_names_abbreviated[s],GG:this.locales.era_names_abbreviated[s],GGG:this.locales.era_names_abbreviated[s],GGGG:this.locales.era_names[s],GGGGG:this.locales.era_names_narrow[s],Q:e,QQ:u(e),QQQ:this.locales.quarter_names_abbreviated[e-1],QQQQ:this.locales.quarter_names[e-1],QQQQQ:this.locales.quarter_names_narrow[e-1],q:e,qq:u(e),qqq:this.locales.quarter_names_abbreviated[e-1],qqqq:this.locales.quarter_names[e-1],qqqqq:this.locales.quarter_names_narrow[e-1],H:i,HH:u(i),h:i==0?12:i>12?i-12:i,hh:u(i==0?12:i>12?i-12:i),K:i>11?i-12:i,k:i+1,KK:u(i>11?i-12:i),kk:u(i+1),a:i>11?this.locales.day_periods.pm:this.locales.day_periods.am,m:a,mm:u(a),s:v,ss:u(v),w:y,ww:u(y),W:k};return t.replace(/('[^']+'|y{1,4}|L{1,5}|M{1,5}|c{1,6}|d{1,2}|D{1,3}|E{1,6}|e{1,6}|F{1,1}|G{1,5}|Q{1,5}|q{1,5}|H{1,2}|h{1,2}|K{1,2}|k{1,2}|m{1,2}|s{1,2}|w{1,2}|W{1,1}|A{1,6})/g,function(n){return n.charAt(0)==="'"?n.substr(1,n.length-2):g[n]||n})};t.prototype.createDateFromFormat=function(t,i){var o=function(n,t,i,r){for(var f,u=r;u>=i;u--){if(f=n.substring(t,t+u),f.length<i)return null;if(/^\d+$/.test(f))return f}return null},v=function(n,t){for(var u,r=0;r<n.length;r++)if(u=n[r],i.substring(t,t+u.length).toLowerCase()==u.toLowerCase())return u.length;return 0},r=0,l=new Date,f=l.getYear(),e=l.getMonth()+1,s=1,u=l.getHours(),h=l.getMinutes(),c=l.getSeconds(),a="";if((n.each(t.match(/(.).*?\1*/g),function(n,t){var l,y,p,w;switch(t){case"yyyy":f=o(i,r,4,4);f!=null&&(r+=f.length);break;case"yy":f=o(i,r,2,2);f!=null&&(r+=f.length);break;case"y":f=o(i,r,2,4);f!=null&&(r+=f.length);break;case"MMM":case"LLL":for(e=0,l=0;l<this.locales.month_names_abbreviated.length;l++)if(y=this.locales.month_names_abbreviated[l],i.substring(r,r+y.length).toLowerCase()==y.toLowerCase()){e=l+1;r+=y.length;break}break;case"MMMM":case"LLLL":for(e=0,l=0;l<this.locales.month_names.length;l++)if(y=this.locales.month_names[l],i.substring(r,r+y.length).toLowerCase()==y.toLowerCase()){e=l+1;r+=y.length;break}break;case"EEE":case"EE":case"E":case"eee":r+=v(this.locales.day_names_abbreviated,r);break;case"EEEE":case"eeee":case"cccc":r+=v(this.locales.day_names,r);break;case"EEEEEE":case"eeeeee":case"cccccc":r+=v(this.locales.day_names_short,r);break;case"MM":case"M":case"LL":case"L":if(e=o(i,r,t.length,2),e==null||e<1||e>12)return null;r+=e.length;break;case"dd":case"d":if(s=o(i,r,t.length,2),s==null||s<1||s>31)return null;r+=s.length;break;case"hh":case"h":if(u=o(i,r,t.length,2),u==null||u<1||u>12)return null;r+=u.length;break;case"HH":case"H":if(u=o(i,r,t.length,2),u==null||u<0||u>23)return null;r+=u.length;break;case"KK":case"K":if(u=o(i,r,t.length,2),u==null||u<0||u>11)return null;r+=u.length;break;case"kk":case"k":if(u=o(i,r,t.length,2),u==null||u<1||u>24)return null;r+=u.length;u--;break;case"mm":case"m":if(h=o(i,r,t.length,2),h==null||h<0||h>59)return null;r+=h.length;break;case"ss":case"s":if(c=o(i,r,t.length,2),c==null||c<0||c>59)return null;r+=c.length;break;case"a":if(p=this.locales.day_periods.am.length,w=this.locales.day_periods.pm.length,i.substring(r,r+p)==this.locales.day_periods.am)a="AM",r+=p;else if(i.substring(r,r+w)==this.locales.day_periods.pm)a="PM",r+=w;else return null;break;default:if(i.substring(r,r+t.length)!=t)return null;r+=t.length}}),r!=i.length)||f==null||(f.length==2&&(f=f>50?1900+ +f:2e3+ +f),e<1||e>12))return null;if(e==2)if(f%4==0&&f%100!=0||f%400==0){if(s>29)return null}else if(s>28)return null;return(e==4||e==6||e==9||e==11)&&s>30?null:(u<12&&a=="PM"?u=+u+12:u>11&&a=="AM"&&(u-=12),new Date(f,e-1,s,u,h,c))};t.prototype.theme=function(n){this.$button.removeClass(this.options.theme);this.$calendar.removeClass(this.options.theme);this.options.theme=n;this.$button.addClass(this.options.theme);this.$calendar.addClass(this.options.theme)};i=n.fn.datepicker;n.fn.datepicker=function(i,r){return this.each(function(){var u=n(this),f=u.data("adp.datepicker"),e=n.extend({},t.DEFAULTS,u.data(),typeof i=="object"&&i);f||u.data("adp.datepicker",f=new t(this,e));typeof i=="string"&&f[i](r)})};n.fn.datepicker.Constructor=t;n.fn.datepicker.noConflict=function(){return n.fn.datepicker=i,this}}(jQuery)